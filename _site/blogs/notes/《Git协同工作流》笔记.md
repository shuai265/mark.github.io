

《Git 协同工作流》笔记

现在公司使用的是 GitFlow 协同工作流，标准代码库有五种分支：Master, Release, Develop, Feature 和 Hotfix，但在日常使用中，由于发布新版本不会 block 开发进度，所以并没有使用到 Release 分支。

GitFlow 工作流的思想——独立：

​	1.开发环境与发布环境独立（develop 和 master）

​	2.新功能之间互相独立

​	3.新功能和旧功能互相独立，可以在旧功能上做 bugfix 同时不会带入新功能

由于目前工作内容是开发公司内部工具库，使用上也稍有不同：

​	1.开发环境与发布环境通过不同的 git 仓库来实现隔离： lib 仓库负责开发， bin 仓库负责版本发布

​	2.发布环境的 git 仓库通过不同的 branch 来区分 alpha/beta release

整个流程还是很清晰，各个版本之间也足够的独立和自由，但是目前还是遇到了一些问题：

​	1.发布新版本时，需要从 lib 仓库打包，再手动更新到 bin 仓库。这个工作耗费了不少的精力，同时增加了出错的机会。例如参数设置错误导致打包错误，少打 tag 导致无法找到 lib 仓库和 bin 仓库各个版本之间的对应关系。

​	2.两个 feather 并行开发，并且需要修改同一部分代码，逻辑有交叉，如果还需要在同一个版本上发布这两个 feather ，那么在合并代码时，需要进行较大的调整，并且增加了出错的概率。

问题的解决：

​	第一个问题可以通过开发自动化工具，自动打包、发版工具，减少人为参与，可以节约开发人员精力，同时减少错误，规范流程。

​	第二个问题可能需要和 leader 沟通，尽量避免这种情况。

